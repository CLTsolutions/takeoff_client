import{C as e,L as t,h as a,M as n,a as r,b as l,c as s,F as o,f as i,d as c,N as d,e as h,g as m,i as p,j as u,k as g,l as f,m as b,T as E,S as x,R as w,n as y,B as N}from"./vendor.555c1fd6.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,l)=>{const s=new URL(e,n);if(self[t].moduleMap[s])return a(self[t].moduleMap[s]);const o=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){l(new Error(`Failed to import: ${e}`)),r(i)},onload(){a(self[t].moduleMap[s]),r(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/assets/");let v="";switch(window.location.hostname){case"localhost":v="http://localhost:3000";break;case"clt-takeofftravelapp.herokuapp.com":v="https://clt-takeoff.herokuapp.com"}var k=v;class C extends e.Component{constructor(e){super(e),this.handleSubmit=e=>{e.preventDefault(),fetch(`${k}/user/login`,{method:"POST",body:JSON.stringify({email:this.state.email,password:this.state.password}),headers:new Headers({"Content-Type":"application/json"})}).then((e=>e.json())).then((e=>{this.props.updateToken(e.sessionToken),this.props.updateIsAdmin(e.user.userRole)})).catch((e=>console.log(e)))},this.handleChange=e=>{const t=e.target,a=t.value,n=t.name;this.setState({[n]:a})},this.state={email:"",password:"",userRole:""}}render(){return e.createElement("div",{className:"login"},e.createElement("form",{onSubmit:this.handleSubmit,className:"space-y-5"},e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"email"},e.createElement("input",{id:"email",required:!0,type:"email",className:"w-full border-2 border-transparent\r\n               p-2 rounded outline-none focus:border-purple-500",placeholder:"Email",name:"email",onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"password"},e.createElement("input",{id:"password",className:"w-full border-2 border-transparent p-2 rounded outline-none focus:border-purple-500",required:!0,type:"password",placeholder:"Password",minLength:8,name:"password",onChange:this.handleChange}))),e.createElement("button",{type:"submit",className:"py-2 px-4  bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-70 cursor-not-allowed rounded-lg mb-3"},"Login")))}}class F extends e.Component{constructor(e){super(e),this.handleSubmit=e=>{e.preventDefault(),fetch(`${k}/user/register`,{method:"POST",body:JSON.stringify({firstName:this.state.firstName,lastName:this.state.lastName,email:this.state.email,password:this.state.password}),headers:new Headers({"Content-Type":"application/json"})}).then((e=>e.json())).then((e=>{this.props.updateToken(e.sessionToken,this.state.userRole)}))},this.handleChange=e=>{const t=e.target,a=t.value,n=t.name;this.setState({[n]:a})},this.state={firstName:"",lastName:"",email:"",password:"",userRole:""}}render(){return e.createElement("div",{className:"register"},e.createElement("form",{onSubmit:this.handleSubmit,className:"space-y-5"},e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"firstName"},e.createElement("input",{id:"firstName",className:"w-full border-2 border-transparent\r\n                p-2 rounded outline-none focus:border-purple-500",required:!0,type:"text",placeholder:"First Name",value:this.state.firstName,name:"firstName",onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"lastName"},e.createElement("input",{id:"lastName",className:"w-full border-2 border-transparent\r\n                p-2 rounded outline-none focus:border-purple-500",required:!0,type:"text",placeholder:"Last Name",value:this.state.lastName,name:"lastName",onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"email"},e.createElement("input",{id:"email",required:!0,type:"email",className:"w-full border-2 border-transparent\r\n               p-2 rounded outline-none focus:border-purple-500",placeholder:"Email",value:this.state.email,name:"email",onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"password"},e.createElement("input",{id:"password",className:"w-full border-2 border-transparent p-2 rounded outline-none focus:border-purple-500",required:!0,type:"password",placeholder:"Password",minLength:8,value:this.state.password,name:"password",onChange:this.handleChange}))),e.createElement("button",{type:"submit",className:"py-2 px-4  bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-70 cursor-not-allowed rounded-lg mb-3"},"Register")))}}class T extends e.Component{constructor(t){super(t),this.authTernary=()=>this.state.login?e.createElement(C,{updateToken:this.props.updateToken,updateIsAdmin:this.props.updateIsAdmin}):e.createElement(F,{updateToken:this.props.updateToken}),this.loginToggle=()=>{this.setState({login:!this.state.login,firstName:"",lastName:"",email:"",password:""})},this.state={login:!0,setLogin:!1,firstName:"",lastName:"",email:"",password:""}}render(){return e.createElement("div",{className:"map-img"},e.createElement("div",{className:"grid grid-cols-5 grid-rows-3 justify-center"},e.createElement("h1",{className:"app-header text-6xl col-start-1 col-end-2 row-start-2 justify-self-center"},"Takeoff..."),e.createElement("h4",{className:"app-subtitle row-start-3 row-end-4 col-span-2 justify-self-center self-center"},"leave the world behind but not your memories.")),e.createElement("div",{className:"bg-indigo-400 bg-opacity-75 max-w-lg mx-auto p-8 md:p-12 my-10 rounded-lg shadow-2xl w-1/2 text-center"},this.authTernary(),this.state.login?e.createElement(t,{to:"",className:"auth-link",onClick:this.loginToggle},"Or register now!"):e.createElement(t,{to:"",className:"auth-link",onClick:this.loginToggle},"Login Now!")))}}class A extends e.Component{constructor(e){super(e),this.deleteBlog=async(e,t)=>(e.preventDefault(),await fetch(`${k}/blog/${t}`,{method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:`Bearer ${this.props.token}`})}),this.props.fetchBlog()),this.state={id:1/0,blog:[],date:"",title:"",entry:""}}render(){return e.createElement("div",{className:"flex justify-center flex-wrap"},this.props.blogData.length>0?e.createElement(e.Fragment,null,this.props.blogData.map(((t,n)=>e.createElement("div",{key:n,className:"bg-indigo-500 bg-opacity-70 overflow-hidden shadow-2xl rounded-lg h-auto w-2/3 my-4 p-2 border-2 border-indigo-400"},e.createElement("p",{className:"text-shadow text-white text-md font-medium px-2"},a(t.date).format("MM/DD/YYYY")),e.createElement("p",{className:"text-shadow bg-opacity-60 text-white text-2xl font-medium px-2"},t.title),e.createElement("p",{className:"bg-gray-100 bg-opacity-80 text-md p-3 rounded-md text-gray-900 border-2 border-gray-200"},t.entry,e.createElement("div",{className:"flex justify-center mt-4"},e.createElement("button",{className:"py-2 px-4 bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-75 cursor-not-allowed rounded-lg mx-2 tracking-wide",onClick:()=>{this.props.editBlog(t),this.props.updateOn()}},"Update"),e.createElement("button",{className:"py-2 px-4 bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-75 cursor-not-allowed rounded-lg mx-2 tracking-wide",onClick:e=>this.deleteBlog(e,t.id)},"Delete"))))))):e.createElement(e.Fragment,null,e.createElement("h3",null,"Create a blog post!")))}}class S extends e.Component{constructor(e){super(e),this.newBlog=async e=>{e.preventDefault();try{const e=await fetch(`${k}/blog`,{method:"POST",body:JSON.stringify({date:this.state.date,title:this.state.title,entry:this.state.entry}),headers:new Headers({"Content-Type":"application/json",Authorization:`Bearer ${this.props.token}`})});await e.json();this.setState({date:"",title:"",entry:""}),this.props.fetchBlog()}catch(t){console.log(t)}},this.handleChange=e=>{const t=e.target,a=t.value,n=t.name;this.setState({[n]:a})},this.state={blog:[],date:"",title:"",entry:""}}render(){return e.createElement("div",{className:"bg-indigo-500 bg-opacity-60 max-w-2xl mx-auto p-5 md:p-12 rounded-lg shadow-2xl w-1/2 my-6"},e.createElement("h3",{className:"mb-4 text-center text-indigo-900"},"Write a new blog post."),e.createElement("form",{className:"space-y-3",onSubmit:this.newBlog},e.createElement("div",{className:"flex flex-col text-center"},e.createElement("label",{htmlFor:"title"},e.createElement("input",{id:"title",type:"text",className:"w-full border-2 border-transparent\r\n                p-2 rounded outline-none focus:border-purple-500 px-2",value:this.state.title,name:"title",placeholder:"Title",onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"date"},e.createElement("input",{id:"date",type:"date",className:"w-full border-2 border-transparent\r\n                p-2 rounded outline-none focus:border-purple-500 px-2",value:this.state.date,name:"date",placeholder:"Date",onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"entry"},e.createElement("textarea",{id:"entry",className:"w-full border-2 border-transparent\r\n                p-2 rounded outline-none focus:border-purple-500 px-2",value:this.state.entry,name:"entry",placeholder:"Entry",onChange:e=>this.setState({entry:e.target.value})}))),e.createElement("button",{type:"submit",className:"py-2 px-4  bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-75 cursor-not-allowed rounded-lg mb-3"},"Submit")))}}class B extends e.Component{constructor(e){super(e),this.editBlog=async e=>{try{const e=await fetch(`${k}/blog/${this.props.updateBlog.id}`,{method:"PUT",headers:new Headers({"Content-Type":"application/json",Authorization:`Bearer ${this.props.token}`}),body:JSON.stringify({date:this.state.date,title:this.state.title,entry:this.state.entry})});await e.json();this.props.fetchBlog()}catch(t){console.log(t)}},this.handleChange=e=>{const t=e.target,a=t.value,n=t.name;this.setState({[n]:a})},this.modalToggle=()=>{this.setState({isModalVisible:!1}),this.props.updateOff()},this.state={isModalVisible:!0,blog:[],date:this.props.updateBlog.date,title:this.props.updateBlog.title,entry:this.props.updateBlog.entry}}render(){return e.createElement("div",null,e.createElement(n,{isOpen:this.state.isModalVisible,toggle:this.modalToggle},e.createElement(r,{toggle:this.modalToggle},"Update your blog post."),e.createElement(l,null,e.createElement("div",{className:"flex flex-col text-center"},e.createElement("label",{htmlFor:"blogTitle"},e.createElement("input",{id:"blogTitle",type:"text",className:"w-full border-2 border-gray-200 p-2 rounded focus:outline-none focus:border-purple-500",value:this.state.title,name:"title",placeholder:"Title",onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"blogDate"},e.createElement("input",{id:"blogDate",type:"date",className:"w-full border-2 border-gray-200 p-2 rounded focus:outline-none focus:border-purple-500",value:this.state.date,name:"date",placeholder:"Date",onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"blogEntry"},e.createElement("textarea",{id:"blogEntry",className:"w-full border-2 border-gray-200 p-2 rounded focus:outline-none focus:border-purple-500",value:this.state.entry,name:"entry",placeholder:"Entry",onChange:e=>this.setState({entry:e.target.value})})))),e.createElement(s,null,e.createElement("button",{className:"py-2 px-4 bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-70 cursor-not-allowed rounded-lg mx-2 tracking-wide",onClick:e=>{this.editBlog(e),this.modalToggle()}},"Update"),e.createElement("button",{className:"py-2 px-4 bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-70 cursor-not-allowed rounded-lg mx-2 tracking-wide",onClick:this.modalToggle},"Cancel"))))}}class O extends e.Component{constructor(e){super(e),this.fetchBlog=async()=>{if(this.props.token)try{const e=await fetch(`${k}/blog/mine`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.props.token}`}}),t=await e.json();return this.setState({blogData:t}),t}catch(e){console.log(e)}},this.componentDidMount=()=>{this.fetchBlog()},this.editBlog=e=>{this.setState({updateBlog:e})},this.updateOn=()=>{this.setState({updateActive:!0})},this.updateOff=()=>{this.setState({updateActive:!1})},this.state={blogData:[],open:!0,updateActive:!1,updateBlog:{}}}componentDidUpdate(e){e.token!==this.props.token&&this.fetchBlog()}render(){return e.createElement("div",{className:"blog-bg"},e.createElement(S,{token:this.props.token,fetchBlog:this.fetchBlog}),e.createElement(A,{token:this.props.token,blogData:this.state.blogData,fetchBlog:this.fetchBlog,editBlog:this.editBlog,updateOn:this.updateOn}),this.state.updateActive?e.createElement(B,{token:this.props.token,fetchBlog:this.fetchBlog,updateBlog:this.state.updateBlog,updateOff:this.updateOff,open:this.state.open}):e.createElement(e.Fragment,null))}}class U extends e.Component{constructor(e){super(e),this.deleteFlight=async(e,t)=>(e.preventDefault(),await fetch(`${k}/flight/${t}`,{method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:`Bearer ${this.props.token}`})}),console.log(e),this.props.fetchFlights(e)),this.state={id:1/0,airline:"",flightNumber:"",originAirport:"",destAirport:"",flightMiles:"",flightTime:"",international:!1,date:""}}render(){return e.createElement("div",null,e.createElement("div",{className:"flex justify-center flex-wrap"},this.props.myFlights.length>0?e.createElement(e.Fragment,null,this.props.myFlights.map(((t,n)=>e.createElement("div",{key:n,className:"mx-8 my-12 w-80 rounded-lg bg-white border shadow-md overflow-hidden"},e.createElement("div",{className:"bg-white border-b-2 border-indigo-500 py-4 px-6 flex justify-between items-end rounded-lg rounded-b-none"},e.createElement("div",{className:"h-8"},e.createElement("h5",{className:"text-blue-800"},t.airline)),e.createElement("div",null,e.createElement("span",{className:"text-blue-800 uppercase font-bold text-grey-darkest tracking-wide text-sm"},t.flightNumber))),e.createElement("div",{className:"flex bg-blue-300 justify-around items-center py-16 px-6 sm:px-12 bg-destination"},e.createElement("div",{className:"flex-1 text-5xl font-bold text-white tracking-wide text-shadow-lg"},t.originAirport),e.createElement("div",{className:"mx-8"},e.createElement(o,{icon:i})),e.createElement("div",{className:"flex-1 text-right text-5xl font-bold text-white tracking-wide text-shadow-lg"},t.destAirport)),e.createElement("div",{className:"flex bg-indigo-400 px-4 sm:px-12 py-4"},e.createElement("div",{className:"w-1/4"},e.createElement("span",{className:"uppercase text-purple-lighter block tracking-wide mb-1 text-md"},"date:"),e.createElement("span",{className:"uppercase text-white block tracking-wide text-sm"},a(t.date).format("MM/DD/YYYY"))),e.createElement("div",{className:"w-2/4"},e.createElement("span",{className:"uppercase text-purple-lighter block tracking-wide mb-1 text-md"},"international:"),!0===t.international?e.createElement("span",{className:"uppercase text-white text-center block tracking-wide text-sm"},"yes"):e.createElement("span",{className:"uppercase text-white text-center block tracking-wide text-sm"},"no")),e.createElement("div",{className:"w-1/4"},e.createElement("span",{className:"uppercase text-purple-lighter block tracking-wide mb-1 text-md"},"miles:"),e.createElement("span",{className:"uppercase text-white block tracking-wide text-sm"},t.flightMiles))),e.createElement("div",{className:"py-3 px-6 sm:px-12 bg-white rounded-lg rounded-t-none"},e.createElement("div",{className:"flex justify-center"},e.createElement("button",{className:"py-2 px-4 bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-70 cursor-not-allowed rounded-lg mx-2 tracking-wide",onClick:()=>{this.props.editFlight(t),this.props.updateOn()}},"Update"),e.createElement("button",{className:"py-2 px-4 bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-70 cursor-not-allowed rounded-lg mx-2 tracking-wide",onClick:e=>this.deleteFlight(e,t.id)},"Delete"))))))):e.createElement(e.Fragment,null,e.createElement("h3",{className:"mt-3"},"Your flight library is empty. Create a flight!"))))}}class D extends e.Component{constructor(e){super(e),this.inputToUppercase=e=>{e.target.value=(""+e.target.value).toUpperCase()},this.handleChange=e=>{const t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState({[n]:a})},this.newFlight=async e=>{e.preventDefault();try{const e=await fetch(`${k}/flight/`,{method:"POST",body:JSON.stringify({airline:this.state.airline,flightNumber:this.state.flightNumber,originAirport:this.state.originAirport,destAirport:this.state.destAirport,flightMiles:this.state.flightMiles,flightTime:this.state.flightTime,date:this.state.date,international:this.state.international}),headers:new Headers({"Content-Type":"application/json",Authorization:`Bearer ${this.props.token}`})});await e.json();this.setState({airline:"",flightNumber:"",originAirport:"",destAirport:"",flightMiles:"",flightTime:"",date:"",international:!1}),this.props.fetchFlights()}catch(t){console.log(t)}},this.state={airline:"",flightNumber:"",originAirport:"",destAirport:"",flightMiles:"",flightTime:"",international:!1,date:""}}ngAfterViewInit(){c.init()}render(){return e.createElement("div",null,e.createElement("div",{className:"bg-indigo-500 w-3/5 bg-opacity-60 max-w-2xl mx-auto p-8 md:p-12 my-10 rounded-lg shadow-2xl"},e.createElement("h4",{className:"mb-4 text-center text-indigo-900"},"Add a flight to your library."),e.createElement("form",{className:"space-y-4",onSubmit:this.newFlight},e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"airline"},e.createElement("input",{id:"airline",type:"text",className:"w-full border-2 border-transparent\r\n                  p-2 rounded outline-none focus:border-purple-500",placeholder:"Airline",value:this.state.airline,name:"airline",onChange:this.handleChange,onInput:this.inputToUppercase}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"flightNumber"},e.createElement("input",{id:"flightNumber",type:"number",min:"0",className:"w-full border-2 border-transparent p-2 rounded outline-none focus:border-purple-500",placeholder:"Flight #",value:this.state.flightNumber,name:"flightNumber",onChange:this.handleChange,onInput:this.inputToUppercase}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"originAirport"},e.createElement("input",{id:"originAirport",type:"text",className:"w-full border-2 border-transparent p-2 rounded outline-none focus:border-purple-500",placeholder:"Origin Airport",name:"originAirport",value:this.state.originAirport,onChange:this.handleChange,onInput:this.inputToUppercase}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"destAirport"},e.createElement("input",{id:"destAirport",type:"text",className:"w-full border-2 border-transparent p-2 rounded outline-none focus:border-purple-500",placeholder:"Destination Airport",name:"destAirport",value:this.state.destAirport,onChange:this.handleChange,onInput:this.inputToUppercase}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"flightMiles"},e.createElement("input",{id:"flightMiles",type:"number",min:"0",className:"w-full border-2 border-transparent p-2 rounded outline-none focus:border-purple-500",placeholder:"Flight Miles",name:"flightMiles",value:this.state.flightMiles,onChange:this.handleChange,onInput:this.inputToUppercase}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"flightTime"},e.createElement("input",{id:"flightTime",className:"html-duration-picker w-full border-2 border-transparent px-6 py-2 rounded focus:outline-none focus:border-purple-500","data-hide-seconds":!0,placeholder:"Flight Time",value:this.state.flightTime,name:"flightTime",onChange:this.handleChange,onInput:this.ngAfterViewInit}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"date"},e.createElement("input",{id:"date",type:"date",className:"w-full border-2 border-transparent p-2 rounded outline-none focus:border-purple-500",placeholder:"Date",value:this.state.date,name:"date",required:!0,pattern:"\\d{4}-\\d{2}-\\d{2}",onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col bg-white rounded py-2 px-2"},e.createElement("label",{htmlFor:"international",className:"international flex flex-row items-center text-gray-900"},"International:",e.createElement("input",{id:"international",type:"checkbox",className:"p-4 ml-3 mr-1 checked:bg-blue-600 checked:border-transparent",checked:this.state.international,name:"international",onChange:this.handleChange}))),e.createElement("button",{type:"submit",className:"py-2 px-4 mb-3 bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-70 cursor-not-allowed rounded-lg"},"Submit"))))}}class M extends e.Component{constructor(e){super(e),this.editFlight=async()=>{try{const e=await fetch(`${k}/flight/${this.props.updateFlight.id}`,{method:"PUT",body:JSON.stringify({airline:this.state.airline,flightNumber:this.state.flightNumber,originAirport:this.state.originAirport,destAirport:this.state.destAirport,flightMiles:this.state.flightMiles,flightTime:this.state.flightTime,date:this.state.date,international:this.state.international}),headers:new Headers({"Content-Type":"application/json",Authorization:`Bearer ${this.props.token}`})});await e.json();this.props.updateOff(),this.props.fetchFlights()}catch(e){console.log(e)}},this.inputToUppercase=e=>{e.target.value=(""+e.target.value).toUpperCase()},this.handleChange=e=>{const t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState({[n]:a})},this.modalToggle=()=>{this.setState({isModalVisible:!1}),this.props.updateOff()},this.state={isModalVisible:!0,airline:this.props.updateFlight.airline,flightNumber:this.props.updateFlight.flightNumber,originAirport:this.props.updateFlight.originAirport,destAirport:this.props.updateFlight.destAirport,flightMiles:this.props.updateFlight.flightMiles,flightTime:this.props.updateFlight.flightTime,international:this.props.updateFlight.international,date:this.props.updateFlight.date}}render(){return e.createElement("div",null,e.createElement("div",null,e.createElement(n,{isOpen:this.state.isModalVisible,toggle:this.modalToggle},e.createElement(r,{toggle:this.modalToggle},"Update your blog post."),e.createElement(l,null,e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"theAirline"},e.createElement("input",{id:"theAirline",type:"text",className:"w-full border-2 border-gray-200 p-2 rounded focus:outline-none focus:border-purple-500",placeholder:"Airline",value:this.state.airline,name:"airline",onChange:this.handleChange,onInput:this.inputToUppercase}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"theFlightNumber"},e.createElement("input",{id:"theFlightNumber",type:"number",min:"0",className:"w-full border-2 border-gray-200 p-2 rounded outline-none focus:border-purple-500",placeholder:"Flight #",value:this.state.flightNumber,name:"flightNumber",onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"theOriginAirport"},e.createElement("input",{id:"theOriginAirport",type:"text",className:"w-full border-2 border-gray-200 p-2 rounded focus:outline-none focus:border-purple-500",placeholder:"Origin Airport",name:"originAirport",value:this.state.originAirport,onChange:this.handleChange,onInput:this.inputToUppercase}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"theDestAirport"},e.createElement("input",{id:"theDestAirport",type:"text",className:"w-full border-2 border-gray-200 p-2 rounded focus:outline-none focus:border-purple-500",placeholder:"Destination Airport",name:"destAirport",value:this.state.destAirport,onChange:this.handleChange,onInput:this.inputToUppercase}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"theFlightMiles"},e.createElement("input",{id:"theFlightMiles",type:"number",min:"0",className:"w-full border-2 border-gray-200 p-2 rounded focus:outline-none focus:border-purple-500",placeholder:"Flight Miles",name:"flightMiles",value:this.state.flightMiles,onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"theFlightTime"},e.createElement("input",{id:"theFlightTime",type:"text",className:"html-duration-picker w-full border-2 border-gray-200 p-2 rounded focus:outline-none focus:border-purple-500","data-hide-seconds":!0,placeholder:"Flight Time",value:this.state.flightTime,name:"flightTime",onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"tripDate"},e.createElement("input",{id:"tripDate",type:"date",className:"w-full border-2 border-gray-200 p-2 rounded focus:outline-none focus:border-purple-500",placeholder:"Date",value:this.state.date,name:"date",required:!0,pattern:"\\d{4}-\\d{2}-\\d{2}",onChange:this.handleChange}))),e.createElement("div",{className:"flex flex-col"},e.createElement("label",{htmlFor:"international",className:"international flex flex-row items-center text-gray-400"},"International:",e.createElement("input",{id:"international",type:"checkbox",className:"p-4 ml-3 mr-1 checked:bg-blue-600 checked:border-gray-200",checked:this.state.international,name:"international",onChange:this.handleChange})))),e.createElement(s,null,e.createElement("button",{className:"py-2 px-4 bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-70 cursor-not-allowed rounded-lg mx-2 tracking-wide",onClick:()=>{this.editFlight(),this.modalToggle()}},"Update"),e.createElement("button",{className:"py-2 px-4 bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-70 cursor-not-allowed rounded-lg mx-2 tracking-wide",onClick:this.modalToggle},"Cancel")))))}}class j extends e.Component{constructor(e){super(e),this.fetchFlights=async()=>{try{const e=await fetch(`${k}/flight/mine`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.props.token}`}}),t=await e.json();return this.setState({myFlights:t}),t}catch(e){console.log(e)}},this.editFlight=e=>{this.setState({updateFlight:e})},this.updateOn=()=>{this.setState({updateActive:!0})},this.updateOff=()=>{this.setState({updateActive:!1})},this.state={myFlights:[],open:!0,updateActive:!1,updateFlight:{}}}componentDidMount(){this.fetchFlights()}render(){return e.createElement("div",{className:"bg"},e.createElement("div",{className:"flex flex-col md:flex-row h-screen"},e.createElement("div",{className:"items-center lg:w-1/3 md:w-full"},e.createElement(D,{token:this.props.token,fetchFlights:this.fetchFlights})),e.createElement("div",{className:"items-center lg:w-2/3 md:w-full"},e.createElement(U,{token:this.props.token,myFlights:this.state.myFlights,fetchFlights:this.fetchFlights,editFlight:this.editFlight,updateOn:this.updateOn}),this.state.updateActive?e.createElement(M,{token:this.props.token,fetchFlights:this.fetchFlights,updateFlight:this.state.updateFlight,updateOff:this.updateOff,open:this.state.open}):e.createElement(e.Fragment,null))))}}class I extends e.Component{constructor(e){super(e)}render(){return e.createElement("div",null,e.createElement(j,{token:this.props.token}))}}class $ extends e.Component{constructor(a){super(a),this.toggle=()=>this.setState({isOpen:!this.state.isOpen}),this.logoutButton=()=>null===localStorage.getItem("sessionToken")?"":e.createElement(t,{to:"/"},e.createElement("button",{onClick:this.props.logout},"Logout")),this.adminLinkInNavbar=()=>"admin"===this.props.userRole?e.createElement("button",null,"Admin Panel"):e.createElement(e.Fragment,null),this.state={isOpen:!1}}render(){return e.createElement("div",null,e.createElement(d,{color:"light",light:!0,expand:"md"},e.createElement(h,null,e.createElement(t,{to:"/"},e.createElement("img",{src:"/assets/airplane.0d5d9f50.svg",alt:"logo",height:"32px",width:"32px"}))),e.createElement(m,{onClick:this.toggle}),e.createElement(p,{isOpen:this.state.isOpen,navbar:!0},e.createElement(u,{className:"mr-auto",navbar:!0},e.createElement(g,null,e.createElement(f,null,e.createElement(t,{to:"/",className:"text-muted"},"Home"))),e.createElement(g,null,e.createElement(f,null,e.createElement(t,{to:"/blog",className:"text-muted"},"Blog"))),e.createElement(g,null,e.createElement(f,null,e.createElement(t,{to:"/admin",className:"text-muted"},this.adminLinkInNavbar())))),e.createElement(b,null,this.logoutButton()))))}}class R extends e.Component{constructor(t){super(t),this._fetchUsers=async()=>{if(this.props.token)try{const e=await fetch(`${k}/user`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.props.token}`}}),t=await e.json();return this.setState({users:t}),t}catch(e){console.log(e)}},this.deleteUser=async(e,t)=>(e.preventDefault(),await fetch(`${k}/user/${t}`,{method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:`Bearer ${this.props.token}`})}),this.fetchUsers()),this.mappingUsers=()=>{if(this.state.users)return this.state.users.map(((t,a)=>e.createElement("tr",{key:a},e.createElement("td",null,t.firstName),e.createElement("td",null,t.lastName),e.createElement("td",null,t.email),e.createElement("td",null,t.userRole),e.createElement("td",null,"User"===t.userRole?e.createElement("button",{type:"submit",className:"py-2 px-4 bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-70 cursor-not-allowed rounded-lg mb-3",onClick:e=>this.deleteUser(e,t.id)},"Delete"):e.createElement(e.Fragment,null)))))},this.state={users:[]}}get fetchUsers(){return this._fetchUsers}set fetchUsers(e){this._fetchUsers=e}componentDidMount(){this.fetchUsers()}componentDidUpdate(e){e.token!==this.props.token&&this.fetchUsers()}render(){return e.createElement("div",null,e.createElement("h3",{className:"text-center mb-3"},"Users:"),e.createElement(E,{striped:!0},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"First Name"),e.createElement("th",null,"Last Name"),e.createElement("th",null,"Email"),e.createElement("th",null,"Role"),e.createElement("th",null,"Admin Actions"))),e.createElement("tbody",null,this.state.users?this.mappingUsers():null)))}}class L extends e.Component{constructor(t){super(t),this.updateIsAdmin=e=>{localStorage.setItem("userRole",e),this.setState({userRole:e})},this.updateToken=e=>{localStorage.setItem("sessionToken",e),this.setState({token:e})},this.clearToken=()=>{localStorage.clear(),this.setState({token:"",userRole:""})},this.protectedViewsAdmin=()=>"admin"===localStorage.getItem("userRole")?e.createElement(R,{token:this.state.token}):e.createElement(I,{token:this.state.token}),this.protectedViews=()=>this.state.token===localStorage.getItem("sessionToken")?e.createElement(I,{token:this.state.token}):e.createElement(T,{updateToken:this.updateToken,updateIsAdmin:this.updateIsAdmin}),this.state={token:"",userRole:""}}componentDidMount(){localStorage.getItem("sessionToken")&&this.setState({token:localStorage.getItem("sessionToken")}),localStorage.getItem("userRole")&&this.setState({userRole:localStorage.getItem("userRole")})}render(){return e.createElement("div",{className:"App"},this.state.token&&e.createElement($,{logout:this.clearToken,token:this.state.token,userRole:this.state.userRole}),e.createElement(x,null,e.createElement(w,{exact:!0,path:"/"},this.protectedViews),e.createElement(w,{exact:!0,path:"/blog"},e.createElement(O,{token:this.state.token})),e.createElement(w,{exact:!0,path:"/admin",component:R},this.protectedViewsAdmin)))}}y.render(e.createElement(e.StrictMode,null,e.createElement(N,null,e.createElement(L,null))),document.getElementById("root"));
